#!/usr/bin/bash

set -eoux pipefail

for copr in \
  ublue-os/staging \
  ublue-os/packages \
  bazzite-org/bazzite \
  bazzite-org/bazzite-multilib \
  ycollet/audinux \
  bazzite-org/webapp-manager \
  che/nerd-fonts; \
do
  if [[ "${1:-enable}" == "enable" ]]; then
    dnf5 -y copr enable "${copr}" && \
    dnf5 -y config-manager setopt copr:copr.fedorainfracloud.org:"${copr////:}".priority=98
  else
    dnf5 -y copr disable "${copr}"
  fi
done

test "${1:-enable}" == "enable" && dnf5 -y config-manager setopt copr:copr.fedorainfracloud.org:ycollet:audinux.priority=1
