#!/usr/bin/bash

set -eoux pipefail

coprs=('ublue-os/staging' 'ublue-os/packages' 'bazzite-org/bazzite' 'bazzite-org/bazzite-multilib' 'ycollet/audinux' 'bazzite-org/webapp-manager' 'che/nerd-fonts')

if [[ "${1:-enable}" == 'enable' ]]; then
  for copr in $coprs; do
    dnf5 -y copr enable $copr;
    if [[ $(echo $copr | grep 'audinux') ]]; then
      dnf5 -y config-manager setopt copr:copr.fedorainfracloud.org:${copr////:}.priority=1
    else
      dnf5 -y config-manager setopt copr:copr.fedorainfracloud.org:${copr////:}.priority=98
    fi
  done

else
  for copr in $coprs; do
    dnf5 -y copr disable $copr;
  done
fi
